ARC ENERGY MEASUREMENT OPERATIONS
        P.V. 3/1/1999
 
 
The ARC energy measurement is under EPICS control through a MEDM display.
Two independent control systems are used: the beam bend angle measurement
through the arc ("scanners") and the field integral of the arc ("integral").
To measure the energy:
-perform several angle measurements
-perform an integral measurement
-analyze the integral measurement and note the value of the arc field integral
-analyze the angle measurements, average the results (proposed by the software),
then ask for the energy calculation, enter the above arc field integral and
you will get the beam energy computed from the average angle.
 
 
1-Computers and softwares used by scanners and integral:
________________________________________________________
 
 
                        SCANNERS                        INTEGRAL
 
Computer:               hac                             pascal1
                                                        (IP=129.57.188.20)
 
 type:                  hp                              sun
 
login under:            gougnaud                        gougnaud
 
password:               see Arun                        see Arun
 
Disk mounted on CUE?    yes (use cp for transfer)       no (use ftp or rcp)
 
.adl files directory:   ~/arc2/adl/                     ~/EPICS/adl/
 
standard .adl file      ARC6.adl                        arc_integral.adl (arc_master.adl)

expert .adl file        expert.adl                      arc_nmr.adl (arc_pdi.adl)
 
Directive files dir.:   ~/arc2/ARC/                     ~/EPICS/ioc.mg/
 
standard directive file:data1234 (data56)               magnet.dir
 
output file:            ~/arc2/ARC/scan_nnn.data        ~/EPICS/...
                                                   ...integral/integral_nnn.data
 
analysis code           ~/arc2/ARC/pascal/arc-scan.sun  ~/pascal/arc-integral
 
result file             ~/arc2/ARC/scan_nnn.data.log    
 
ioc name                arcioc                          arcioc2
                        (IP=129.57.188.24)              (IP=129.57.188.21)

ioc login name	        None                            target

ioc password            None                            password

ioc "iam"               gougnaud                        gougnaud
 
ioc type and RAM size   MVME162, 8Mo                    MVME162, 8Mo
 
ioc boot file:          ~/arc2/ioc/up                   ~/EPICS/ioc.mg/up
 
 
 
2-Summary of ARC operations:
________________________________
  6 scanners of the same type, called "ARC scanner" and labelled from
scanner #1 to #6, are installed on the Hall-A beamline. Scanners #1 to #4
are used for the ARC energy measurement and they are located on the Hall-A
arc: #1 and #2 just upstream the arc, in the BSY, and #3 and #4 in the Hall-A
tunnel, just upstream the Compton polarimeter. Scanners #5 and #6 are
located between the Moller and the target to control the beam geometry
on the target and their use will not be discussed here.
  Each scanner has a motor/ball-screw/shaft-encoder/vacuum-penetrator
system moving accurately
a set of 3 tungsten wires through the beam. Each time a wire crosses the beam
a PMT located a few meters downstream records a signal due to the
electromagnetic shower induced by the beam in the wire. Both forward and
backward passes are recorded. The motion is a horizontal translation and,
for a forward pass:
-the translation is from beam left to beam right,
-the two first wire crossing the beam are at 45deg from
the vertical,
-the third wire, which is the only important for the ARC energy
measurement, is vertical.
 Recording, during the scan, the scanner position and the PMT output
voltage allows us to determine the beam position at each scanner location.
Then, using calibration data not detailed here, we deduce the net beam bend
angle through the arc. This result measured in dispersive arc tuning, along
with the field integral of the arc dipoles, provides an accurate determination
of the beam energy.
 
The list of the operations for an ARC energy measurement is given here
and will be detailed after:
 
  1/check the pulser (scanners)
 
  2/check the HV     (scanners)
 
  3/check EPICS      (scanners)
 
  4/check space on disk(scanners)
 
  5/check the integral (see "Details on integral system check" below)
 
  6/ask for chicane off, put target in a safe position, ask ~5uA (achromatic)
 
  7/perform a scan test in achromatic at ~5uA
        -->solve the trips
        -->final adjustment of gains of scanners #1 and #2
        -->save the last (non saturated) scan
 
  8/if everything is OK, ask for dispersive beam ~5uA
 
  9/check dispersive beam:
        -CW ~5uA
        -Fast Feedback ON
        -Energy Feedback ON  <-------important
        -Kresting ON
        -arc's quads and steerers OFF
        -beam stable at entrance and exit (Bscope)
        (see the test plane of the dispersive mode in MCC)
 
  10/perform a scan in dispersive at ~5uA (see details below)
        -solve the trips
        -finish the 4 gains adjustment
        -perform and save 3 good scans
 
  11/perform a field integral (see details below)
 
  12/restore beam for the experiment
        unmask the diagnostics, restore achromatic mode and chicane,
        quit MEDM and turn both HV channels OFF.
 
 
  13/analyze scan data (dispersive only) and integral data
 
 
3-Preliminary details about MEDM
_________________________________
 
  To fill or update an input field of MEDM, put the mouse cursor
in the field, do the edit or change, and then PRESS CARRIAGE RETURN
WHILE THE CURSOR IS STILL INSIDE THE FIELD!!!
 
 
4-Details on pulser check
_________________________
 
   A pulser is used to trig the scanner acquisition.
   The ARC scanners pulse generator (middle counting room)
must be adjusted on 1000Hz  for CW beam (on "external trigger"
in pulsed mode, for any scanner). Check the output with a scope.
Settings for CW mode
        -frequency: 1KHz
        -delay: not important in CW, should be always 0.
        -time width: 10us
        -level: 2.5V on 50 Ohm load, 5V on 1 MOhm,  polarity: + (TTL)
 
 
5-Details on HV check
_____________________
 
The energy measurement uses scanners #1 to #4 with PMT read out. One
PMT (PMT0) is in the BSY reading scanners #1 and #2. One other is
in the Compton region (PMT1), reading scanners #3 and #4. They both are
energized by the "beam line HV module", card#1 channel#0 (PMT0)
and channel#1 (PMT1), under EPICS control of the general Hall A
control. Both voltages must be -1200V, make sure that "Meas. V"
indicates this voltage. If needed, push on "enable/disable" or
edit the "SET V" field.
 
6-Details on EPICS check (scanners)
___________________________________
 
-login as "gougnaud" on hac, you need to know her password, ask to Arun. If you
connect by "cd ~gougnaud", you will not be able to edit the command file
nor save the data.
hac> cd arc2/adl
hac> medm&
-on the medm access window, click on "file", and then "open"
-in the open file window, select "ARC6.adl", the ARC window must
appear then
-on the medm access window, click on "execute"
-if then the ARC window remains partly blank, or if you have some doubt
about the identity of the program running in the ioc, go to the "reboot ioc"
section below
 
 
7-Details on ioc reboot (scanners)
________________________________________
 
Reboot arcioc by pushing the "Beamline Arc Measurement VME Reset"
green button (middle counting room): the arcioc is loaded from the "up" file
If the ARC window (in execute mode) was not blank, it becomes blank,
then wait for 1 minute it returns to grey: the scanner is then operational.
If the ioc is not dead, you can also reboot it by software through the network:
        hac>rlogin arcioc
        -> reboot  (the rlogin connection is then broken by the reboot)
10/98:The hard reboot (green button labelled "ARC") is temporarily connected
also to another VME crate (e,p energy measurement), use it only if e,p is not
running.
 
 
 
8-Details on disk space check (scanners)
________________________________________
 
Run the "quota -v" UNIX command under ~gougnaud/arc2/ARC:
 
Filesystem     usage  quota  limit    timeleft  files  quota  limit    timeleft
/u/home       119308 512000 512000                924     -1     -1
 
Do it several times, sometimes the answer is crazy!
In the above example you have about 400Mo free, a scan file of
scanners #1 to #4 (energy measurement) occupies about 1Mo when
unzipped and 300Ko when zipped, so you have room for ~400 unzipped files
or ~1200 zipped files.
 
9-Details on running a scan
___________________________
 
  -On the MEDM screen load "data1234" as Command File.
 
Content of "data1234":
 
+1 P     5.
+2 P     5.
+3 P     5.
+4 P     5.
-1 P     5.
-2 P     5.
-3 P     5.
-4 P     5.
 
means: use scanners #1 to #4, do first the 4 forward pass and then
the 4 backward ones (to let to the wires the time to cool down)
at 5 turns/s=12.500 mm/s. Warning: lower velocity may cause the wire to melt.
An error message will be edited if the velocity is outside ]0., 6.1 t/s[.
P is for PMT readout (S for Secondary emission for scanners #5 and #6).
The file is in ~gougnaud/arc2/ARC.
In pulsed mode (60Hz) use a velocity of 0.3 turn/s. You need to edit a special
file setting this velocity.
On the MEDM screen update CW/60Hz, beam current and DISPersive/ACHROmatic
(for the record).
-Push "START" when ready, you can follow the operations by looking at:
                -running command: the line of the "Command file" currently
                executed
                -the cursor position of the scanners
                -voltage versus position plot. The location of the 6 scanners
                on the MEDM window is the following:
 
                        #1      #2
 
                        #3      #4
                        
                        #5      #6
 
                The forward plot is green, the backward one is red. In case of
                saturation, redo the scan with lower gain (see details below).
                The only peak used for energy measurement is the rightmost one
                (H profile produced by the V wire): focus on this peak to adjust
                the gain, the 2 other peaks may saturate.
                -the names on the top of the plots are the CEBAF device names
                of the scanners.
WARNING: operating at too high a beam current or too small a velocity
may cause the wire to melt, with no opportunity to repare it
before the next shutdown.
The total travel time is about 15s per scanner. During the travel, have a look
to the beam current. If the beam trips, inquire why, correct
if it was caused by the scan (set masks), and redo the scan (see details
on trips below).
-Save the data (see details below).
-Print the MEDM window (see details below).
-you can plot the profile (see details below).
  After the scan, check the peak (rightmost) quality: it must be
compact (Gauss curve) with a good signal/noise ratio (>5)
If scan #1 and #2 are not compact: report to MCC and make sure that
the fast feedback is ON. If scan #3 and #4 are not compact: report
also to MCC and make sure that the energy feedback and the kesting
are ON.
  If the scan seems OK: start a field integral measurement 
and report to "saha@jlab.org" with as much details
as possible (at least the file names) for data analysis and
beam energy determination. Record the mail in the e-logbook.
Don't forget to save the files.
 
10-Details on MEDM window print
_______________________________
 
  To print the MEDM window: put the mouse cursor somewhere in the
background part of the ARC window (outside the plots), push the
mouse right button, select print, release the button.
It should go on "cha1hp" if you work from the counting house.
 
11-Details on profile plot
__________________________
 
  To plot the profile: use your favorite curve plotter (hvplot, xmgr...)
The scan file is an plain ASCII file with a line per acquisition (trigger)
and two float per line: position in encoder unit (4096.0 per
2.500 mm or turn) and voltage after gain in V. First the
forward profile with increasing "x", then the backward one,
with decreasing "x" (x=coordinate transverse to the
beam and horizontal. Towards beam right for scanners #1
to #4, towards beam left for #5 and #6). Some lines
are header lines. In this case the 1st character
is a "!" seen as a comment line by hvplot (need to be
changed for other plotters). The rightmost peak (high x values)
was produced by the vertical wire (it is a pure horizontal
profile), the 2 other peaks by the +45deg. and -45deg. wires.
 
12-Details on gain adjustment (scanners)
_______________________________________
 
  Adjust the gain of the signal amplifier to get ]-10V, +10V[ at the input
of the ADC, range= 001, 002, 004,...128, 256.
  Gain adjustment: in the ARC scanner MEDM window, click (right button
for Arun, left one in general!)
on the gain command button located close to the plot of the profile
of the scanner you want to adjust. Then select a gain and release the mouse.
After a scan:
  -Select higher gain if the rightmost peak is <3V (in absolute value)
  -Select lower gain if the scanner saturates. To know if the scanner saturates,
do not believe the MEDM plot (on which several adjacent channels are averaged),
trust the red diode associated to each scanner (close to the plot).
If you want to know what these diodes look like, click on "edit" on the MEDM
access window: you will see the diodes. Then return to "execute".
  Start with the gains (dispersive case):
        scanner         gain
        #1              4
        #2              8
        #3              32
        #4              32
 Note that in dispersine mode the beam is dispersed at
scanners #3 and #4 locations, so these scanners need a higher gain than
#1 and #2.
 
  To zoom on a peak, change the MEDM parameters of the window ("edit"):
        -first determine the range (in mm) on which you want to zoom
        -on the MEDM access window, push on "edit"
        -on the ARC window, click anywhere inside the plot you
                want to change
        -on the "Resource Palette", go down to "Axis Data", select it
        -on the "Cartesian Plot Axis Data", in the "X Axis" part
                (X means horizontal), change "Axis Range" from "auto-scale"
                to "user-specified", then edit "Minimum Value" and "Maximum
                Value" to specify the horizontal range you want to look at,
                the unit is mm. If you used the "edit" facility of MEDM,
                it will suggest you to save the changes when killing the
                window. Do not save the changes!
        -on the MEDM access window, push on "execute"
  Short-cut: push on the right button while the cursor is inside the plot,
     you will access directly to the MEDM axis data menu
  Other MEDM tricks (may depend on the version of MEDM you are running):
     -Control+middle button+vertical drag will scale the plot up or down 
     -Shift+middle button+drag will translate the plot
 
 
 
13-Details on file save (scanners)
_________________________________
 
  To save the data in a disk file: push on "Save". The software
builds automatically a name of the type: "scan_nnn.data",
where nnn is the scan run number, incremented automatically.
The current run number is stored on disk, so unless a disk crash,
you can reboot the VME or delete a data file without resetting this number.
Read the run number on the MEDM screen and record
the file name in the  e-logbook. The file will be
stored in ~gougnaud/arc2/ARC. As the file is big (2*7000 channel
histogram per scanner), purge or compress your own data files. ~gougnaud
belongs both to hac and the CUE, thanks to Javier. So you
do not need "ftp" to copy it inside the CUE, the cp command
works as far as you have the good file access. Write in the e-logbook the
final path of the file in the CUE.
 
14-Details on trip handling
___________________________
 
  Trips are frequent at 5uA, caused by scanners #3 and #4 and
triggered by the Compton ion chamber or BLM, even with chicane OFF.
They are invasive for the other halls. If a trip occurs, write
in the e-logbook which scanner, forward/backward (for this, you
have to monitor the beam current during the scan),
beam current, arc tuning mode, which diagnostic tripped (ask to MCC),
get a strip chart of this diagnostic (MCC). Contact the beamline
coordinator ( Arun Saha) or the hall leader (Kees) to allow MCC
to mask the diagnostic. But in any case start with unmasked diagnostics
to have all safety systems responding. If masking is impossible or
not sufficient, reduce the beam current down to 1uA but the quality
of the energy measurement will then be affected by the poor signal/noise
ratio.
If the trip occurred from scanner #3 or #4 during the preliminary
test in achromatic mode, leave this step and ask for dispersive mode.
In this mode, due to the dispersion of the beam, the luminosity
will be reduced and hopefully the trip will not occur.
Nevertheless, the test in achromatic mode is usefull to check the
system (including the trip protection!) and to anticipate a gain change
for scanners #1 and #2.
 
15-Detail on encoder change (scanner)
_____________________________________

 The main screw shaft is coupled to the steppre motor by a bellow
coupler (bellow #1) and the motor to the encoder by a second bellow
coupler (bellow #2). If for any reason (encoder change, motor change,
one of the bellows slept) the angular relationship between the screw and
the encoder is lost, then:
-these two objects must be linked again in good angular agreement (see detail)
-the theodolite survey of the bench must be redone (see detail)
 
16-detail on encoder re-mount (scanner)
_______________________________________
 The procedure is based on 2 rules:
-the "home" position is defined by an encoder reading=4096 enc. units
-this "home" position must be at about  1/2 turn (~2048=1.25mm) from
   the Low Limit Switch (LLS) transition. So this transition must happend
   at encoder reading~2048
-if the Low Limit Switch was also changed, then the rule is that the external
   fiducial must be at 230mm from the beam nominal axis when the encoder
   reading is 118407 ("survey" position). This rule needs the help of a 
   survey.
  The procedure is the following:
-by software (see "scanner expert task detail") or by hand (by acting on 
  the bellow #1), set the scanner in the convenient position (LLS or survey)
-decouple the bellow #2
-connect the encoder to the control box readout
-by hand turn the encoder shaft up to have the good reading
-fasten strongly the coupler #2
  Note: the encoder is absolute over 64 turns with 4096 units per turn.
So, starting from 0 and turning it clockwise, one should read:
-4096 after one turn
-8192 after two turns
-...
-up to 262143 just (one puls) before 64 turns
-0 again one puls after.
-4096 after one turn
....
 
17-Details on scanner expert task
_________________________________

  The path of the "expert task" MEDM file is given in section 1
Use this task to set the encoder in any position between the limit switches,
to dismount the wire cartrige, to set the encoder,...
-Call this task in MEDM.
-You get a small window with a blue button.
-Left click on it: it gives you the choise between the 4 ARC scanners.
-Select the scanner you are interested with, then release the lefl mouse
    button.
-An "Expert-task" bigger window appears.
-In this new window, left click on the blue button "click to initialize...".
-Then the designated scanner name is displayed on the top of the window
-Edit the motion you want in the "First goal" input field. This is
  an ABSOLUTE position (i.e. not an increment), from an origin which
  can be arbitrary, in unit of motor micro-step. +2000 microstep= +1 turn=
  +4096 encoder units, so one has 2.048 encoder unit per microstep.
-push on "Pos-->0" to set to zero the "Motor current position" register.
  The current scanner position becomes the new origin of the motor positions.
-once the motor position is entred, push on "1 WAY" to execute the motion
-If you want to move the scanner fron its current position by 10mm towards
  the beam, and if the current position is 100000, then enter
  100000.+(10./2.500)x2000.=108000., and push on "1 WAY".
-If you want to go to the LLS position, enter a large negative value
  like -1000000, and push on "1WAY"
Note: Limit switches will not stop the motor at a very reproducible position.

18-Detail on theodolite survey of a bench
_________________________________________

  The goal is to measure the H angle between the segment joining the fiducials
of the 2 scanners of the bench in their "survey" position, and the normal
to the autocollimation mirror associated with this bench. The procedure is
the same for both benchs, except that:
-the upstream one needs a BSY access, the downstream one just a HallA access,
  providing the light tubes were left in straight position.
-the upstream angle is ~0, only affected by a change in the scanners, the
  downstream one is ~6 deg and it can be affected by a change in the scanners
  or by a motion of the tunnel.
-the upstream autocollimation is at short distance, the downstream one
 is at long distance, through the light tubes, and the lign of sight is
 bent by a pair of mirrors, both at forward and at backward pass.
The procedure is:
-using the "expert task" (see detail), set both scanners in their "survey"
position (encoder=118407+-2)
-install the theodolite on its support and level it carefully.
-mount the battery (2 autocollimation batteries and chargers are stored
  in the shed, make sure the batteries are charged)
-push the "ON/Enter" button, the bottom display prompts "V zero 1"
-relese the "V" break (small knob of the top pair of knobs)
-initialize the V (Vertical angle) encoder by turnung slowly and
continuously the optics around the horiz. azis in a direction, until you get
 a beep and "V zero 2" displayed. Then turn in the opposite
direction, until you get a beep and "A zero" displayed in the top display.
-relese the "A" break (small knob of the bottom pair od knobs)
-initialize the A (Horizontal angle) encoder by turnung slowly and
 continuously the whole theodolite around its vertical axis, until you get
 a beep and "Theo" displayed in the top display. Push "ON/Enter" button
 to accept the proposed "theodolite" menu.
-from this point, "V" and "A" angles will be permanently displayed
  in their own displays, in unit of decimal degrees from 0.0000 to 359.9999
  If the decimal part is not displayed, correct the levelling.
Note: the origin of the A angles is arbitrary (it is not the case of that of
the the V angles), so you may decide to set it to zero, for example at the
first autocollimation measurement: this way, the measured angles will be
more intuitive. To do this:
-from the "THEOD" menu push on "+" (means go to the next menu calles "SET A")
-"SET A" menu is proposed: push "enter" to accept, you have a "WAIT"
  displayed, after what the angles are displayed again, but with A=0.0000
-push "-" to proceed: the sub-menu "MEAS P" is proposed, you must accept
  ("enter"), you have then the angles displayed, push "-" to come back
  to the "THEOD" menu, then push "enter" to accept it, you should still
  have A=0.0000: you have a new origin of the A angles.

-measure the autocollimation angle:
   -open the light tube
   -plug the autocollimation light cable 
   -turn ON the autocollimation power switch on the battery
   -adjust the autocollimation power potentiometer to half range
   -remove the theodolite handle, to let the cable go through.
   -adjust the occular (small knob on the optics) to your vision, until
     you have the cross hairs well focused
   -adjust the main focusing (large knob on the optics) to infinity
     (turn counter clockwise up to the limit and come back by ~1/4 turn)
   -adjust the V angle to 90.00?? deg.: first move directly the optics,
     second fasten the V break and use the V knob.
   -adjust the A angle to point in the direction of the light tube:
     first move directly the theodolite, second fasten the A break and
     use the A knob.
   -using the A knob, search for a light signal
   -focus on it (main focusing): the autocollimation patern is a yellow/green
      cross
   -adjust A and V angles to get the cross hairs on the autocollimation cross,
     fine adjust both focusings, then check if the patern you have is the
     good one (there is 2 wrong autocollimation patterns): when you change
     by a small amount the A/V angle, then the A/V coincidence between
     both crosses must be destroyed. If it is not the case, you are focusing
     on one of the two wrong paterns. Then change the main focusing towards
     infinity (counter clockwise) to get an other patern.
   -fine adjust the autocollimation power potentiometer to get the best
     vertical line of the autocollimation cross
   -fine adjust A and V angles, record their values in the Shed logbook.
   -change both angles by 180.000 deg., WITHOUT CHANGING THE MAIN FOCUSING,
     and redo the previous step.
   -close the light tube
   -turn OFF the autocollimation power switch on the battery
Note: the above measurement is easy from upstream, more tricky from downstream
(long distance autocollimation). New operators should start with the upstream
measurement.

-measure the scanner #2/#3 (the one which is on the autocollimation side)
   -remove the scanner cover
   -unplug the connexion of the encoder to the VME
   -plug the control box on the fiducial lamp and on the encoder
   -record the encoder reading in the logbook. It shoulb be ~118407+-2
   -adjust the main focusing on the fiducial wire
   -adjust the V angle to the middle of the apperture across which the wire
       appears
   -fine adjust the A angle, record A and V values in the Shed logbook.
   -change both angles by 180.000 deg., WITHOUT CHANGING THE MAIN FOCUSING,
     and redo the previous step.
   -record the encoder reading in the logbook. It should give the previous
      reading +-1 encoder unit
   -unplug the control box
   -plug the connexion of the encoder to the VME
   -cover the scanner
Note: in case of scanner #2, a foil closing  the appertures in the mirror
    support must de removed prior to the survey, and reinstalled after.

-measure the scanner #1/#4 as for #2/#3

-re-measure the autocollimation angle.

-turn OFF the theodolite (push simultaneously the  + and - buttons)
-relese both breaks
-mount the handle
-dismount the theodolite
-dismount the battery and the autocollimation cable
-store the theodolite in its box
-store the theodolite box and the control box in the Shed
-charge the battery(ies)

Note: in case you have to change the battery during the measurement,
redo the complete measurement with the new battery. A battery in good shape
can provide ~2h of work with only 1/3 with autocollimation ON.
The survey of a bench will take between 1h and 1/2h. If possible, discharge
the battery before charging it.

-analyze the angle:
    -in the directory ~gougnaud/arc2/ARC/angles,
        edit a plain ASCII file named upstream_ddmmyy.dat
        or downstream_ddmmyy.dat, depending on the bench, where ddmmyy
        stands for the date of the survey.
        Use upstream_270798.dat or downstream_270798.dat as a model.
        Units are encoder unit and decimal degrees. If severall measurement
        of the same quantity were done, enter the average. If the full
        measurement of a bench was done twice, edit both sets of
        data as in the model.
    -run "angle" on a Sun machine and follow the instructions of the program,
        accept the proposed mirror calibration angle and ask for an average
        of all your measurements. If only one bench was
        measured (encoder change, BSY closed,...), use for the other bench
        the most recent file available in ~gougnaud/arc2/ARC/angles.
    -analyze individual measurements and compare them to the above average.
	The reproducibility of the reference angle measures severall times on
        the same day should be <= 10-3 deg (17 urad~3 10-5 on the energy).
    -compare the new average to the previous one: if nothing changed in
        the scanners, and if only the downstream angle changed, 
        this can be interpreted as a motion of the arc (the code gives the
        detail of the 3 angles: upstream, dowmstream and reference).
    -the files used today (23/06/99) are upstream_210699.dat (1 meas.) and
        downstream_210699.dat (2 meas.). They result in a reference angle of
        34.32301 deg. (averaged)
     -write the new reference angle in the arc-scan source code
        (include file "arc-incl-plot.f", parameter "Reference_Angle_Degree")
     -compile and test the arc-scan code.
     -report in the e-logbook about the changes and results (file names).
 
15-More on the theodolite menu
______________________________

   It is a 2-levels menu, the entry point after power ON and indexes
initialization is at the 2nd level (Theodolite?), the +/- buttons
are used to navigate among several choices, the "enter" button to validate
the currently proposed choice. In the above list, "+" will move to the
next option (down), "-" to the previous one (up), and "enter" will answer
"yes" to the proposition. In some cases (SET A) the choise is just yes/no.
Then "enter" means "yes" and "+" or "-" means "no":

1st level menu: 
            --->M  (Measure)?
                A  (Adjust)?
                U  (Unit)?

    2nd level menu M  (Measure):                        
                       ---> M-0   Return to 1st level?
                            M-2   THEODOLITE?--->theodolite
                            M-5   Zero angle?-->A=0,Set angle?-->Set A to value
                                                             +/-:Measure Point
                            M-7   Hold angle?-->Hold angle

    2nd level menu A  (Adjust):
                       ---> A-0   Return to 1st level?
                            A-1   Adjust V index?--->Adjust V index
                            A-2   Adjust A coll.?-->Adjust A coll.
                            A-4   Illumin. ON/OFF?-->Change Illumin. mode?
                            A-5   Compensator ON/OFF?-->Change Compens. mode?
                            A-6   Levelling with compens.?-->Levelling

    2nd level menu U  (Unit):
                       ---> U-0   Return to 1st level?
                            U-1   Reverse A reading?--->Reverse A reading
                            U-2   Change V display?-->Select this V display?
                            U-3   Change angle unit?-->Sel. this angle unit?
                            U-7   Sound ON/OFF?-->Change Sound mode?
                            U-8   Select configuration?-->Select this configur?


15-Summary of field integral
____________________________
 
  The purpose is to measure in absolute the straight field integral of
a "BA" 3m long dipole, called the "9th dipole" and located in the "Dipole Shed".
It is of the same type as the 8 arc dipoles and powered in series with them.
  The ARC integral setup is basically made of a 3m long plate (the "probe")
able to move inside the 9th dipole gap along the beam axis and
carrying two field measurement devices: a pair of pick-up coils connected
in series and a set of NMR probes. The coils are on both ends of the probe
and the NMR's close to the center.
 
-at the "upstream" probe position, the "downstream" coil is close to the dipole
center, the "upstream" is outside the dipole and the NMR's at one end of the
dipole:
 

Door<---                  <--------DIPOLE-------->
            up coil      NMR       down coil
               <--------PROBE--------->
 
-at the "central" probe position, each coil is at one end of the 3m long
dipole and the NMR's close to the dipole center:
 
Door<---                  <--------DIPOLE-------->
                       up coil      NMR       down coil
                          <--------PROBE--------->
 
-at the "downstream" probe position, the "upstream" coil is close to the dipole
center, the "downstream" is outside the dipole and the NMR's at one end of the
dipole:
 
Door<---                  <--------DIPOLE-------->
                                   up coil      NMR       down coil
                                      <--------PROBE--------->
 
We call upstream the position where the probe is the closest
to the shed access door. Among the 3 above position, the only where the NMR
can lock on the dipole field is the central one as in extreme position of the
probe, the field homogeneity is not sufficient. The probe
position is controlled by a linear encoder.
The Z axis refers to the "beam" direction, increasing from upstream to
downstream. We use three kinds of "Z":
-Zm to locate a point inside the magnet. The dipole center is at Zm=0 and
   the yoke ends at +-1500.mm
-Zp to locate a point inside the probe. The probe center is at Zp=0. Each
   of the 4 NMR probes has a Zp given in the file "magnet.dir". At a 
   temperature of 21C, the coils are at Zp=+-1519.815mm (from magnet.dir)
-Zd to refer to a displacement of the probe w.r.t. the dipole. Zd=0 refers
   to the upstream (home) position of the probe. The integral measurement is
   performed from Zd=0.000mm (1st PDI trigger) to Zd=3199.000mm (last
   PDI trigger), for forward pass. Zd is given by the display (at the
   top of the rack) or by the master screen ("OUT").
The relationship between Zm, Zp and Zd is:
    Zd-Zm+Zp=C where C is a constant given in magnet.dir (C=1604.000 nomin.).
    Example of use: to have the probe center at the dipole center, one must
    set Zd=1604.000mm (set Zm=0 and Zp=0 in the above formula, and solve 
    for Zd)
 
The integral measurement sequence is the following:
 
-from the current position (a priory arbitrary) move the probe upstream,
up to a limit (optic) switch.
-move downstream by a few mm to cross the encoder index (encoder initialization)
-move to the central position to measure the central field by NMR, the system checks if
the NMR locks and if the reading is stable, it will be the "before" field
-move back to upstream position
-move to downstream position while integrating the flux through the coil system,
this measurement will be called the "forward" integral (duration ~ 7s)
-move back to upstream position while integrating the flux through the coil system,
this measurement will be called the "backward" integral (duration ~ 7s)
-move to the central position to measure the central field by NMR, the system checks if
the NMR locks and if the reading is stable, it will be the "after" field
  In addition to the central field, 4 probe temperatures, a local excitation
current measurement, the setting of the dipoles P.S, the readback of the dipoles P.S
and the probe position at NMR measurement time are recorded "before" and "after"
 
To perform an integral field measurement:
1-check if the system works (see "details on integral system check" below)
2-run the above integral sequence (see "details on integral run" below)
3-fix the error(s) if any  (see "details on integral errors" below)
4-save the data in a file  (see "details on integral data save" below)
5-analyze the data (see Arun)
 
16-Shed access and safety
_________________________
 
For safety reasons, the access to the shed is limited to a list of authorized
persons and the work inside the shed is regulated by an OSP
(Operating Safety Procedure). To be added to the
list, ask to the Hall-A leader. The standard operation mode of the integral
measurement setup is the remote mode, through the network, from the counting house.
In case of problem needing an access in the shed, unauthorized users must contact Arun.
Note: the OSP will expire on 9/1/99
 
17-Details on integral system check
___________________________________
 
1-From any workstation or X-terminal connected by telnet to pascal1 workstation,
run MEDM with arc_master.adl data file (see Arun for the password of
gougnaud on pascal1 and section 1 for the path of arc_master.adl).
If pascal1 is not responding, go in the shed and check UPS (see "Details on 
AC power (integral)" below).
If the UPS is not beeping, check the room temperature.
If the temperature is above 35C, the thermal protection of the workstation is
probably activated, see "detail on temperatures" below.
If the temperature is below 35C, ask to the computer center to restart pascal1.
 
2-Check if the 4 temperatures and the 3 currents  are stable, in agreement
between them and if the beam energy computed from the current is realistic
compared to what you know from MCC. In not, call Arun. If the IOC is dead
(all displays on "arc-master.adl" are blank), reboot the ioc (see "integral ioc
reboot" below)
Note: the current/field ratio is about 1000A/1.98T and the energy/field ratio
is 12.03 GeV/T. The current used by MCC for the accelerator tuning is the set
current. The readback can be different from the set by 0.1A. The local current
can be different from the set by 5A. For the temperatures see "detail on 
temperatures" below.
 
3-Check if the NMR is locked. If not see "details on NMR lock" below,
 
4-Check if the NMR reading is stable within 10-5 relative (P.S. stability).
 If not, inquire about a recent or running setting change by the MCC.
 If not, call Arun.
 
 
18-Details on NMR lock
______________________
 
  -check if the dipole current is above 22A. The integral setup can't work for
     lower currents (22A~0.043T~517MeV), due to the NMR probe limitation.
  -check if the probe is at a central position, corresponding to Zd~1604mm.
     It should be at this position if no special motion was ordered since
     the previous integral measurement.
     If not, enter 1604 RETURN in the "set Zd position" input field, wait for the
     end of the motion (look at cursor and position readback labelled "out") and wait
     for the NMR lock for up to 1 minute. Note: due to the software, the position
     readback may be updated ~10 seconds after the real probe motion.
     Zd~0mm is for the upstream position, ~1604mm for the central position
     and ~3208mm for the downstream position. If the probe does not obey,
     call Arun. If Arun is not available, reboot the ioc (see "integral ioc reboot"
     below)
  -check if the NMR probe selected is the good one. The system has 4 probes
     to cover the field/energy range [0.043T/0.517GeV,1.05T/12.63GeV].
     The software selects automatically the probe from an estimated field
     and the following range table (from file "magnet.dir"):
 
         mini   maxi    probe
          T      T
        0.043   0.1356  # 1
        0.0784  0.271   # 2
        0.159   0.547   # 3
        0.30    1.05    # 4
 
     The estimated field is computed from the "set" current and the coefficients
     given above. Note that there is an overlap between the range of each probe.
     In the standard mode ("auto selection"), two selection algorithms are used:
       -initial selection: select the probe in which the estimated field
         will be the most "centred"
       -routine check: change the probe only if the estimated field is
         outside the selected probe range.
      Initial selection is executed at boot time, at each integral start and
      when you leave the "manual selection" optional mode.
      The routine check is performed periodically
     In some cases in the past this algorithm did not select the best probe.
     If it occurs again, force the probe selection by opening arc_nmr.adl
     medm screen,then switch to manual selection mode, click on the probe
     you want to select and wait for NMR lock. Don't forget to return to the
     "auto selection" mode before leaving the integral measurement.
      Report about the problem in the e-logbook.
   -expert users can also use nonstandard search modes and DAC values as
     proposed by the arc_nmr.adl screen ("Dac Value", "Dac+-5%" and "All Probes Range").
     Note that "Dac Value" needs a scope. They are asked to restore the
     standard mode ("SeLected Probe Range") at the end. The DAC to field relationship
     used by the software is linearly interpolated in the table (from file
     "magnet.dir"):
 
         dac=0    dac=1000 dac=2000 dac=3000 dac=4095
            T        T        T        T        T
         .040362  .053885  .074430  .104184  .132404  probe # 1
         .080713  .107771  .148845  .208340  .264790  probe # 2
         .161430  .215539  .297680  .416680  .529570  probe # 3
         .322870  .431112  .595471  .833455 1.059210  probe # 4
 
Note: as the 9th dipoles has an uniform field, there is no gradient coil around the
probes and the lock is in general easier to obtain than with the HRS dipoles.
Nevertheless some difficulties may occur at low field due to the hysteresis gradient.
The NMR system is the same as for the HRS (Metrolab) but the EPICS implementation is
different. The field polarity is "+".
Some lock problems may apear in the [60A,70A] range. In this case select the "Dac+-5%"
option, compute the approximate field as explained above, estimate the corresponding
DAC value from the table above (depending on field value and probe #), set this
estimated value in the arc_nmr.adl screen, correct this setting by using the "+", "++",
"-", and "--" buttons up to have the "OUT IN T" value close to the field you computed,
and then wait for the lock. It should work, you have 100s to get the lock at the begining
and at the end of the integral sequence! The best is to get the lock by this way before
starting the integral sequence.
 
19-Details on integral run
__________________________
 
  To run the integral measurement sequence, call the "arc_integral.adl" medm screen
on pascal1 (see "Details on integral system check" above), then:
-push "start" to start the full sequence
-look at the results displayed:
   -after the "before" NMR measurement: the "before" data set
   -after the "forward" integral pass: the forward velocity profile and the forward
     voltage-after-gain profile
   -after the "backward" integral pass: the backward velocity profile and the backward
     voltage-after-gain profile
   -after the "after" NMR measurement: the "after" data set
-if "BAD NMR" or "PDI saturation" flags are set, or if something is obviously wrong
in the data or plots, fix the problem (see "Details on
integral error" below) and start a new integral run.
-data are ready to be saved (see "Details on integral data save" below)
 
20-Details on integral error
____________________________
 
-"BAD NMR" flag is set if at least one of the 4 NMR status (locked and stable, before and
  after) is wrong
  -the full NMR field measurement is made of 3 successive elementary measurements
     separated by a 5s delay.
  -the "lock" status is set to wrong if at least one of the 3 NMR measurements
     did not lock before a 100s timeout. The measurement sequence is aborted as soon
     as a measurement does not lock, so the maximum time one has to wait for a full
     NMR measurement is about 100s (in case of a zero current measurement for
     example)
  -the "stable" status is set to wrong if the 2nd or the 3rd field values differs from
     the 1st by more than 5 10-4 relative. In any case,
     the field value returned is the last one.
-"In position" is set to false if the probe position was outside 1604.0+-0.1mm at
     NMR measurement time.
-"PDI saturation": the PDI (Mertolab's Precision Digital Integrator) consists in a
     programmable amplifier and a VFC integrator working in the [-5V, +5V] input range.
     The PDI gain is the result of an automatic selection in the [1,2,5,10,...1000]
     range, similar to the NMR probe selection.
     In case of a wrong gain selection (maximum voltage
     after gain, as plotted in the MEDM screen, outside the [1.5V,5V[ range), call
     the "arc_pdi.adl" MEDM screen to switch the gain selection mode from "auto" to
     "manual" and then select manuallay the gain. Return to "auto" mode before
     leaving the integral measurement.
-"before" and "after" data must be very close: <0.1 C difference for the temperatures
     of a given probe, <0.1A for the currents and <10-5 for the field.
-plots: the blue curves are from forward pass, yellow ones for backward pass.
   -the top plot gives the probe velocity (in m/s) as function of its position
      (in mm). The forward velocity should be +0.6m/s everywhere except at the center
      where it is reduced to +0.06m/s. The backward velocity plot should be the mirror
      image of the forward ons (-0.6 and -0.06m/s)
   -the bottom plot gives the coil voltage after gain (in V) as function of the probe
      position (in mm). It should be a null voltage everywhere except a set of
      oscillation at the center. The backward voltage plot should be the mirror
      image of the forward one (V-->-V). See "PDI saturation" above.
   -to zoom a MEDM plot, see "Details on gain adjustment (scanners)" above.
 
21-Details on integral data save
________________________________
 
  The procedure to save the datafile from "arc-integral.adl" is the sane as for
the scanners (see "Details on file save (scanners)" above), with an independent
integral run number. The file name will be of the type "integral-nnn.data", stored
on pascal1 in ~gougnaud/EPICS/integral/. As pascal1 disk is not mounted
on the CUE, use ftp or rcp to move the file to the CUE.
The size of a file is 207Ko.
The data file is made of:
-a header containing basically the  "before" and "after" data
-the forward integral data
-the backward integral data
Forward end backward integral data are made of 3200 lines of 3 data each:
-a line per trigger, i.e. per mm of probe motion over the 3.2m of the total motion.
  The first trigger line is missing.
-the first data of the line is the probe position in mm, it should be a round
value from 1.000mm to 3199.000mm at forward pass and from 3199.000mm to 1.000mm at
 backward pass,
-the 2nd data is the flux increment measured during the current step (i.e. between
the previous trigger and the current one) in unit of 10-8Vs, corrected from the gain.
-the 3rd data is the time of the trigger since the start, in microsecond unit.
   These field increments,like the scan profiles, can be plotted by standard plotters,
see "Details on profile plot" above. The curve plotted online in 
"arc-integral.adl" is the time derivative of the above flux data, 
multiplied by the gain to get the input VFC voltage after gain.
 
22-Integral ioc reboot
______________________
 
  One of the VME boards (PMAC's motor board) has its own internal boot process
triggered at "power on" time. So the usual boot procedure (red push button on
the ioc or reboot command through the network) is not sufficient to make sure that
the integral VME is correctly initialized. Thus, boot the VME by shitching OFF and
ON the AC power of the VME crate. The AC power switch is located in the lower part
of the crate front panel.
 
23-Details on temperatures
__________________________
 
  The AC system of the shed is made of two cooling units, a heating unit
and a controller connected to two temperature sensor : one located in
the shed and one located in the BSY.
This system is programmed in such a way that the temperature of
the shed follows the BSY temperature within +-2C. The BSY temperature can be
anywhere in the [18C,35C] range, regardless to the season. The BSY temperature
and the shed temperature are given (in F) by a display panel located close to the
workstation, on the wall. The AC system can be set in manual control by turning
from "auto" to "manual" a set of switches controlling the cooling units and the heater
unit. These switch boxes are located on the shed wall.
If the shed temperature is above 34.4C (94F), call Arun (the electronics can 
be damaged) and cool down the shed in manual AC mode.
 
  The 4 temperature sensors of the probe are labelled Tx+z+, Tx+z-, Tx-z+, Tx-z-
depending on their position w.r.t. the following (x,z) frame:
 
 
                                             x
                                             ^
                                             |
                                             |
Door<---                  <-------------D I P|O L E ----------->
                                             |
                          <-----Tx+z- -------|------Tx+z+------>
                          |                  |                 |
                          |                  |---------->z     |
                          |                                    |
                          |              P R O B E             |
                          <-----Tx-z- --------------Tx-z+------>
 
Both "x+" sensors are on the probe edge which is inside the dipole gap and both
"x-" sensors on the opposite edge which is outside the dipole gap.
Both "z-" sensors are at 1/4 of the long dimension of the probe and both z+ at 3/4 of
this length. The average of the 4 temperatures is used by the analysis program
to correct the coil distance from the thermal expansion of the probe, so it is
important to make sure that the 4 sensors are working well. The user can just
make sure that the temperatures displayed in "arc-master.adl" or recorded in
"arc-integral.adl" are realistic. In "arc-integral.adl" they are given in the
order: Tx+z-, Tx+z+, Tx-z-, Tx-z+
Tx-z- and Tx-z+ should be close to the shed temperature.
Tx+z- and Tx+z+ depend on the probe position, as the gap (iron yoke) is warmer
than the shed and the dipole coil (at both ends of the dipole) is warmer
than the iron yoke. For a probe in a central position for
more than about one hour, the Tx+z- and Tx+z+ sensors should
give the yoke temperature, i.e the shed temperature plus 0. to 5.C, depending
on the current, LCW temperature and the magnet/shed temperature history.
The 4 temperatures are also displayed inside the shed, on the electronics rack.
These values are digitized by separate ADC's, so they may differ from the
remote values by ~0.1C.
 
24-Details on AC power (integral)
_________________________________
 
All the shed electronics and computer (except the motor power, see details
about the Power Switch below) are powered through
a UPS (Uninterruptible Power Supply) whose role is to protect the setup from
short (~1/4 h) power outages and to convert the US AC power (60Hz, 200V 
between two phases) in a well stabilized AC power of European type (220V, 50Hz).
When working in the shed, be carefull about the electrical hazard as the setup can
remain powered a long time after interrupting the UPS input
(see "Shed access and safety" above).
The UPS unit is located under a table, in front of the electronics rack.
It has a display, a small keyboard and a beeper. The beeper activated means
that some important message about the UPS is displayed. In this case, use
the keys to scan the UPS memory, read the messages, record them in the e-logbook,
stop the beeper and inform Arun. Refer to the UPS manual (available in the shed)
for details of operation.
 
25-Details on mechanics (integral)
_________________________________
 
  The probe is able of a fast motion (~1m/s) and it is hazardous to access or to
introduce something inside the device, under the altuglass covers, or to dismount
a cover. It is also hazardous to manipulate the motor shaft (see "Shed access and safety"
above). To do it safely, the user must first turn off the motor power box.
The power box is located under the motor. It has two external switch: one controlling
the logics and one controlling the power:
 
                    Logics switch
                          |
(TOP VIEW)                |
                          V
                        -------    -------------------------------------
                       |       |  |       <-------DIPOLE------>         |
           Power box-->|       |  |                                     |
DOOR<---               |    MOTOR-|                                     |
                       |       |<---Power switch                        |
                       |       |  |                                     |
                        -------    -------------------------------------
 
It is important NOT to switch off the logics (some data in memory will be lost),
but to switch off the motor power (see the exact Power switch location above) prior
to any intervention on the mechanics.
The detailed procedure is the following:
  -turn OFF the power switch
  -wait for ~1min to empty its buffer-capacitor
  -you can work safely on the mechanics
  -make sure that the path of the probe is free (tools...) and the covers in position
  -turn back ON the power switch
  -reboot the VME (see "Integral ioc reboot" above)
 
The above procedure may be necessary if, for some reason, the probe went outside
its allowed range limited by a pair of electric limit switches.
The probe range is limited by the following set of devices:
  -upstream energy damper            for Zd in [-40.,-14.mm]
  -upstream electric limit switch    for Zd<-7.5mm
  -upstream optic limit switch       for Zd<-3.8mm
    (operation range, 3.2m long)
  -downstream optic limit switch     for Zd>3200.8mm
  -downstream electric limit switch  for Zd>3212.3mm
  -downstream energy damper          for Zd in [3214.,3228.mm]
The current status of the 4 limit switches is given in the "arc-master.adl" screen.
Optic limit switch are used for the encoder initialization procedure (see "Summary
of field integral" above). Electric limit switches should never be activated.
But if this happends, then the motor control:
-stops the motor
-raises an error flag (the letted "d" for defect is displayed inside the power box,
the usual display being a vertical segment)
-waits for a manual repositioning of the probe inside its allowed range and for
a reboot of the VME.
 
The manual repositioning of the probe inside its allowed range can be done safely
by manipulating the motor shaft while the motor power is off, according to the
above procedure.
 
Details on detailed field mapping
_________________________________

The main use of the intergral setup is to measure the integral of the 9th
dipole along a straight line, located on the axis of the pole tips.
By moving (manually) the dipole in the transverse direction and then
performing the integral sequence, one will measure the integral along
different axis, and so access to the integral gradient of the dipole
(used to determine the dipole positionning tolerancies).
By inserting a jumper (short) on one of the pick-up coils and reducing the gain
of the PDI, the same sequence as for the integral will provide, after
a specific analysis, the field profile of the dipole as seem by the
other coil. This profile will cover one half of the magnet, including
one of the two fringing fields.
Reduce the PDI gain by one step ( example: if the automatic gain is 10, select
manually 5)
By inserting the jumper on the other coil, on can get the other half profile.
These two single coil measurements will provide together
the complete profile of the dipole including both fringing fields.
For the central part, where the field is uniform, more accurate data
can be taken using the NMR probes. Here, there is no change in the
hardware, but one must use a specific software: the "mapping" MEDM window.
By combining, for a set of transverse positions:
-standard integral measurement
-upstream profile (upstream coil alone)
-downstream profile (downstream coil alone)
-NMR map of the plateau,
   one get a 2D map of the dipole field in its mid-plane with an optimum
accuracy and redondancy and a minimun time spent by the operator.
This 2D map is used to get the straight-to-curved correction to the
integral and a set of tolerancies.

  Call "medmMew" (and NOT "medm"), then open "arc_map.adl", as this display
is written in a new version of MEDM. Due to a bug in this Solaris/MEDM
combination, you must enter the name of the display in the open menu, you
can't just click on the display file name.
You then get the "ARC-MAPPING" screen.
You must define the position inside the magnet (Zm) where you want measure
the field, inside the [-1500mm,+1500mm] range. The software will compute
the probe position Zd depending on the NMR probe selected (automatic or
manual selection). You have to define 3 regions, where the steps may differ.
Edit the fields:
-STARTING Zm
-rgion 1 : NUMBER OF STEPS and STEP SIZE, then the "intermediate position Zm
    is computed automatically by the software as a result of the above input
-rgion 2 : NUMBER OF STEPS and STEP SIZE, then the "intermediate position Zm
    is computed as above
-rgion 3 : NUMBER OF STEPS and STEP SIZE, then the "final position Zm
    is computed as above
Then push "Start". It takes about 20s per point, unless lock problem, where
it can take up to 100s (timeout). In case the NMR does not lock even far from
the ends, push "Stop Map here", use the DAC+-5% lock mode (see "detail on
 NMR lock"), and start a new map.
Note: after "Stop Map here" the incomplete map can still be saved.
Use "Stop" in case of emmergency, and then reboot the VME (see detail).
The measured fields are displayed on the screen as a function of Zm.
The sequence is:
-a measurement at Zm=0, called "Bref1"
-the list of measurement you entred
-a measurement at Zm=0, called "Bref2"
When done, save the data by pushing "Save". The file is numbered automatically,
the name is of the type mapping_nnn.data, where "nnn" stands for the map
number. The directory is given by the MEDM screen.
An example of file ("mapping_7.data") is given below (EPICS was not
responding for the P.S. readback and set, the real current was 90A):


!ARC magnetic measurement mapping data file
!version:1
!date: SAT JUN 12 04:49:40 1999 SAT JUN 12 05:41:32 1999
 -1460.00          50         20.00
  -460.00          46         20.00
   460.00          50         20.00
!temperature x+,z+(deg.C) 29.8 30.2 
!temperature x+,z-(deg.C) 31.7 32.0
!temperature x-,z+(deg.C) 28.4 28.2
!temperature x-,z-(deg.C) 28.6 28.2
!tal nbr pts:        146
!initial & final NMR probe: 2    2
  Zm (mm),     B (T), NMR lckd, NMR flag,local crt(Vadc),crt set(A),crt rdt(A)
     0.00   0.1770036        1         1         92.19       0.04       0.00
 -1460.00   0.1770068        1         1         92.19       0.04       0.00
 -1440.00   0.1770157        1         1         92.19       0.04       0.00
.......
  1439.99   0.1770756        1         1         92.19       0.04       0.00
  1460.00   0.1770665        1         1         92.19       0.04       0.00
     0.00   0.1770044        1         1         92.19       0.04       0.00
!end

Note: "1" is the normal status for NMR lock and NMR (stability) flag
The lines #4,#5 and #6 of the header give the data entred by the operator.
They result is a map from -1460 to +1460mm with an uniform 20mm step size.
This input is the standard one for the needs of ARC.

End of the ARC manual

